# Unit 8
## Chapter 1: Outlining

In this chapter, you will begin using tools and scripts to AUTOMATICALLY outline the Rails app.  I HATE having to read through large amounts of code just to get a basic overview, and I HATE the idea of having to do that over and over again as the app progresses.  Furthermore, manually reading through a much larger and more complex application takes too long.  The outline.sh script takes care of this automatically.  If you use the tools described in this chapter, you can make sure that anyone on your team always has on-demand access to outlines of your app.

### New Branch
Enter the command "git checkout -b 08-01-outline".

### Gemfile
* Add the following code to the end of the Gemfile:
```
# BEGIN: for outline.sh
group :development do
  gem 'rails-erd' # Generates block diagrams
  gem 'railroady' # Generates block diagrams
  gem 'annotate', '2.7.1' # Adds comments listing parameters and the output "rails routes"
end
# END: for outline.sh
```
* Enter the command "sh git_check.sh" to install these new gems.
* Enter the following commands:
```
git add .
git commit -m "Installed rails-erd, railroady, and annotate"
```

### outline.sh
* Create the file outline.sh with the following content:
```
#!/bin/bash

mkdir -p notes

echo '----------'
echo 'git status'
git status

file_he='notes/1-file_list-helpers.txt'
file_mo='notes/1-file_list-models.txt'
file_co='notes/1-file_list-controllers.txt'
file_vi='notes/1-file_list-views.txt'
d_mo='log/diagram-models.jpg'
d_co='log/diagram-controllers.jpg'
d_gems='log/diagram-gems.jpg'

sh pg-start.sh

echo '-----------------------------'
echo 'bundle exec annotate --routes'
bundle exec annotate --routes

echo '--------------------'
echo 'bundle exec annotate'
bundle exec annotate

echo '------------------------------------'
echo 'Listing the helper files in the file'
echo $file_he
echo 'This file was AUTOMATICALLY generated by the outline.sh script.' > $file_he
echo '-------------------' >> $file_he
echo 'HELPERS' >> $file_he
tree test/helpers >> $file_he
echo '' >> $file_he
tree app/helpers >> $file_he
echo '' >> $file_he

echo '-------------------------------'
echo 'Listing the model files in file'
echo $file_mo
echo 'This file was AUTOMATICALLY generated by the outline.sh script.' > $file_mo
echo '------' >> $file_mo
echo 'MODELS' >> $file_mo
tree test/models >> $file_mo
echo '' >> $file_mo
tree test/fixtures >> $file_mo
echo '' >> $file_mo
tree app/models >> $file_mo

echo 'This file was AUTOMATICALLY generated by the outline.sh script.' > $file_co
echo '-----------' >> $file_co
echo 'CONTROLLERS' >> $file_co
tree test/controllers >> $file_co
echo '' >> $file_co
tree app/controllers >> $file_co

echo 'This file was AUTOMATICALLY generated by the outline.sh script.' > $file_vi
echo '---------------------------' >> $file_vi
echo 'VIEWS AND INTEGRATION TESTS' >> $file_vi
echo '' >> $file_vi
echo '----------------' >> $file_vi
echo 'config/routes.rb' >> $file_vi
cat config/routes.rb >> $file_vi
echo '----------------' >> $file_vi
tree test/integration >> $file_vi
echo '' >> $file_vi
tree app/views >> $file_vi

echo 'FINISHED compiling the list of files that make up the MVC structure'
echo '-------------------------------------------------------------------'

echo '---------------'
echo 'Using rails-erd'
bundle exec erd --attributes=foreign_keys,primary_keys,timestamps,inheritance,content --filetype=dot --filename=notes/diagram-models --inheritance --notation=bachman
dot -Tjpg notes/diagram-models.dot > $d_mo
rm notes/diagram-models.dot
echo
echo "Models diagram is at $d_mo"
echo

echo '---------------'
echo 'Using railroady'
bundle exec railroady -i -l TestLabel -v -a --all-columns -j -m -p -z -t --engine-controllers -C | dot -Tjpg > $d_co
echo
echo "Controllers diagram is at $d_co"
echo

echo '------------------------------'
echo 'Drawing gem dependency diagram'
bundle viz --file=log/diagram-gems --format=jpg --requirements --version

echo '----------'
echo 'git status'
git status

echo '*************'
echo 'OUTPUT FILES:'
echo $file_he
echo $file_mo
echo $file_co
echo $file_vi
echo $d_mo
echo $d_co
echo $d_gems
echo
```
* Enter the following commands:
```
git add .
git commit -m "Added outline.sh"
```

### Creating Outlines
* Enter the command "sh outline.sh".
* Enter the following commands:
```
git add .
git commit -m "Executed sh outline.sh"
```

### Updating Other Scripts

### Wrapping Up
